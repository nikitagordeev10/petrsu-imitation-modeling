Функция ГенерацияЭкспоненциальногоРаспределения(лямбда)
    // Генерация случайного числа по экспоненциальному распределению
    Возврат -Лог(СлучайноеЧисло(0, 1)) / лямбда;
КонецФункции

Функция СимуляцияВремениГибелиКлеток(лямбды)
    // Генерация времени гибели клеток
    времяГибели = Новый Массив;
    Для каждого лямбда Из лямбды Цикл
        время = ГенерацияЭкспоненциальногоРаспределения(лямбда);
        времяГибели.Добавить(время);
    КонецЦикла;
    Возврат времяГибели;
КонецФункции

Функция ВычислениеУсловнойВероятности(лямбды, n, m, k)
    // Вычисление условной вероятности P(N >= k | T^(k))
    T = СимуляцияВремениГибелиКлеток(лямбды);
    
    // Разделение времени гибели на злокачественные и здоровые клетки
    T_злокачественные = Новый Массив;
    T_здоровые = Новый Массив;
    Для i = 0 По n - 1 Цикл
        T_злокачественные.Добавить(T[i]);
    КонецЦикла;
    Для i = n По n + m - 1 Цикл
        T_здоровые.Добавить(T[i]);
    КонецЦикла;
    
    // Сортировка времени гибели здоровых клеток по убыванию
    T_здоровые.Сортировать(Ложь);
    
    // Условная вероятность P(N >= k | T^(k))
    Если T_здоровые[k - 1] > Макс(T_злокачественные) Тогда
        Возврат 1;
    Иначе
        Возврат 0;
    КонецЕсли;
КонецФункции

Функция ОценкаВероятности(лямбды, n, m, k, num_simulations)
    // Оценка вероятности P(N >= k) с использованием условного метода Монте-Карло
    результаты = Новый Массив;
    Для i = 1 По num_simulations Цикл
        вероятность = ВычислениеУсловнойВероятности(лямбды, n, m, k);
        результаты.Добавить(вероятность);
    КонецЦикла;
    
    // Вычисление среднего значения
    сумма = 0;
    Для каждого результат Из результаты Цикл
        сумма = сумма + результат;
    КонецЦикла;
    средняяВероятность = сумма / результаты.Количество();
    Возврат средняяВероятность;
КонецФункции

// Параметры задачи
n = 1;          // Количество злокачественных клеток
m = 40;         // Количество здоровых клеток
k = 35;         // Пороговое значение для числа оставшихся здоровых клеток
num_simulations = 1000;  // Количество симуляций для оценки вероятности

// Генерация параметров для экспоненциального распределения
лямбды = Новый Массив;
Для i = 1 По n + m Цикл
    лямбды.Добавить(СлучайноеЧисло(0, 10));
КонецЦикла;

// Оценка вероятности
вероятность = ОценкаВероятности(лямбды, n, m, k, num_simulations);
Сообщить("Оценка вероятности P(N >= " + k + "): " + Формат(вероятность, "ЧГ=2"));
