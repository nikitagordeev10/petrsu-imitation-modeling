Функция ЭкспоненциальноеСлучайноеЧисло(Лямбда)
	ГСЧ = Новый ГенераторСлучайныхЧисел();

    Возврат -Log(1 - ГСЧ.СлучайноеЧисло()) / Лямбда;
КонецФункции

Функция СортировкаПоУбыванию(Массив)
    Для i = 0 По Массив.Количество() - 1 Цикл
        Для j = i + 1 По Массив.Количество() - 1 Цикл
            Если Массив[i] < Массив[j] Тогда
                Временное = Массив[i];
                Массив[i] = Массив[j];
                Массив[j] = Временное;
            КонецЕсли;
        КонецЦикла;
    КонецЦикла;
    Возврат Массив;
КонецФункции

Функция ОценкаВероятности(n, m, ЛямбдаЗлок, ЛямбдаЗдоров, k, КоличествоИспытаний)
    Успехи = 0;
    
    Для trial = 1 По КоличествоИспытаний Цикл
        T = Новый Массив;
        
        Для i = 1 По n Цикл
            T.Добавить(ЭкспоненциальноеСлучайноеЧисло(ЛямбдаЗлок[i - 1]));
        КонецЦикла;
        
        Для i = n + 1 По n + m Цикл
            T.Добавить(ЭкспоненциальноеСлучайноеЧисло(ЛямбдаЗдоров[i - n - 1]));
        КонецЦикла;
        
        ЗдоровыеВремена = Новый Массив;
        Для i = n + 1 По n + m Цикл
            ЗдоровыеВремена.Добавить(T[i - 1]);
        КонецЦикла;
        
        ЗдоровыеВремена = СортировкаПоУбыванию(ЗдоровыеВремена);
        
        T_k = ЗдоровыеВремена[k - 1];
        
        Успех = Истина;
        Для i = 1 По n Цикл
            Если T[i - 1] >= T_k Тогда
                Успех = Ложь;
                Прервать;
            КонецЕсли;
        КонецЦикла;
        
        Если Успех Тогда
            Успехи = Успехи + 1;
        КонецЕсли;
    КонецЦикла;
    
    Возврат Успехи / КоличествоИспытаний;
КонецФункции

&НаКлиенте
Процедура Сгенерировать(Команда)
    n = 5; // Количество злокачественных клеток
    m = 10; // Количество здоровых клеток
    k = 3; // Число здоровых клеток, которые должны остаться
    КоличествоИспытаний = 100000; // Количество испытаний (чем больше, тем точнее результат)

    ЛямбдаЗлок = Новый Массив;
    ЛямбдаЗлок.Добавить(0.5);
    ЛямбдаЗлок.Добавить(0.8);
    ЛямбдаЗлок.Добавить(0.4);
    ЛямбдаЗлок.Добавить(0.6);
    ЛямбдаЗлок.Добавить(0.7);

    ЛямбдаЗдоров = Новый Массив;
    ЛямбдаЗдоров.Добавить(0.6);
    ЛямбдаЗдоров.Добавить(0.7);
    ЛямбдаЗдоров.Добавить(0.8);
    ЛямбдаЗдоров.Добавить(0.9);
    ЛямбдаЗдоров.Добавить(0.5);
    ЛямбдаЗдоров.Добавить(0.6);
    ЛямбдаЗдоров.Добавить(0.7);
    ЛямбдаЗдоров.Добавить(0.8);
    ЛямбдаЗдоров.Добавить(0.9);
    ЛямбдаЗдоров.Добавить(0.6);

    Вероятность = ОценкаВероятности(n, m, ЛямбдаЗлок, ЛямбдаЗдоров, k, КоличествоИспытаний);
    
    Сообщить("Оценка вероятности P(N >= " + k + "): " + Вероятность);
КонецПроцедуры

